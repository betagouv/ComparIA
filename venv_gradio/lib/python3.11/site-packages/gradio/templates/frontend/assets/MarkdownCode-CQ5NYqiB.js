const __vite__fileDeps=["./mermaid.core-C4JyAOVD.js","./index-BAPxzJ9I.js","./index-CvIHqeCr.css","./step-bAaxMov6.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as q}from"./index-BAPxzJ9I.js";import{k as x,A as H,c as N}from"./MarkdownCode.svelte_svelte_type_style_lang-BJzlDKLo.js";var S=function(e,t,r){for(var a=r,l=0,s=e.length;a<t.length;){var o=t[a];if(l<=0&&t.slice(a,a+s)===e)return a;o==="\\"?a++:o==="{"?l++:o==="}"&&l--,a++}return-1},X=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},B=/^\\begin{/,F=function(e,t){for(var r,a=[],l=new RegExp("("+t.map(g=>X(g.left)).join("|")+")");r=e.search(l),r!==-1;){r>0&&(a.push({type:"text",data:e.slice(0,r)}),e=e.slice(r));var s=t.findIndex(g=>e.startsWith(g.left));if(r=S(t[s].right,e,t[s].left.length),r===-1)break;var o=e.slice(0,r+t[s].right.length),h=B.test(o)?o:e.slice(t[s].left.length,r);a.push({type:"math",data:h,rawData:o,display:t[s].display}),e=e.slice(r+t[s].right.length)}return e!==""&&a.push({type:"text",data:e}),a},K=function(e,t){var r=F(e,t.delimiters);if(r.length===1&&r[0].type==="text")return null;for(var a=document.createDocumentFragment(),l=0;l<r.length;l++)if(r[l].type==="text")a.appendChild(document.createTextNode(r[l].data));else{var s=document.createElement("span"),o=r[l].data;t.displayMode=r[l].display;try{t.preProcess&&(o=t.preProcess(o)),x.render(o,s,t)}catch(h){if(!(h instanceof x.ParseError))throw h;t.errorCallback("KaTeX auto-render: Failed to parse `"+r[l].data+"` with ",h),a.appendChild(document.createTextNode(r[l].rawData));continue}a.appendChild(s)}return a},U=function i(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(a.nodeType===3){for(var l=a.textContent,s=a.nextSibling,o=0;s&&s.nodeType===Node.TEXT_NODE;)l+=s.textContent,s=s.nextSibling,o++;var h=K(l,t);if(h){for(var g=0;g<o;g++)a.nextSibling.remove();r+=h.childNodes.length-1,e.replaceChild(h,a)}else r+=o}else a.nodeType===1&&function(){var w=" "+a.className+" ",b=t.ignoredTags.indexOf(a.nodeName.toLowerCase())===-1&&t.ignoredClasses.every(k=>w.indexOf(" "+k+" ")===-1);b&&i(a,t)}()}},V=function(e,t){if(!e)throw new Error("No element provided to render");var r={};for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);r.delimiters=r.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],r.ignoredTags=r.ignoredTags||["script","noscript","style","textarea","pre","code","option"],r.ignoredClasses=r.ignoredClasses||[],r.errorCallback=r.errorCallback||console.error,r.macros=r.macros||{},U(e,r)};const Z=(i,e)=>{try{return!!i&&new URL(i).origin!==new URL(e).origin}catch{return!1}};function E(i,e){const t=new H,r=new DOMParser().parseFromString(i,"text/html");return A(r.body,"A",a=>{a instanceof HTMLElement&&"target"in a&&Z(a.getAttribute("href"),e)&&(a.setAttribute("target","_blank"),a.setAttribute("rel","noopener noreferrer"))}),t.sanitize(r).body.innerHTML}function A(i,e,t){i&&(i.nodeName===e||typeof e=="function")&&t(i);const r=i?.childNodes||[];for(let a=0;a<r.length;a++)A(r[a],e,t)}const j=["!--","!doctype","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],{SvelteComponent:W,attr:G,binding_callbacks:J,detach:Q,element:Y,flush:m,init:$,insert:ee,noop:T,safe_not_equal:te,toggle_class:v}=window.__gradio__svelte__internal,{afterUpdate:re,tick:ae,onMount:de}=window.__gradio__svelte__internal;function ne(i){let e;return{c(){e=Y("span"),G(e,"class","md svelte-7ddecg"),v(e,"chatbot",i[0]),v(e,"prose",i[1])},m(t,r){ee(t,e,r),e.innerHTML=i[3],i[12](e)},p(t,[r]){r&8&&(e.innerHTML=t[3]),r&1&&v(e,"chatbot",t[0]),r&2&&v(e,"prose",t[1])},i:T,o:T,d(t){t&&Q(e),i[12](null)}}}function L(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ie(i,e,t){let{chatbot:r=!0}=e,{message:a}=e,{sanitize_html:l=!0}=e,{latex_delimiters:s=[]}=e,{render_markdown:o=!0}=e,{line_breaks:h=!0}=e,{header_links:g=!1}=e,{root:w}=e,{allow_tags:b=!1}=e,{theme_mode:k="system"}=e,_,y;const M=N({header_links:g,line_breaks:h,latex_delimiters:s||[]});function D(n,d){if(d===!0){const f=/<\/?([a-zA-Z][a-zA-Z0-9-]*)([\s>])/g;return n.replace(f,(c,u,p)=>j.includes(u.toLowerCase())?c:c.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}if(Array.isArray(d)){const f=d.map(u=>({open:new RegExp(`<(${u})(\\s+[^>]*)?>`,"gi"),close:new RegExp(`</(${u})>`,"gi")}));let c=n;return f.forEach(u=>{c=c.replace(u.open,p=>p.replace(/</g,"&lt;").replace(/>/g,"&gt;")),c=c.replace(u.close,p=>p.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}),c}return n}function O(n){let d=n;if(o){const f=[];s.forEach((c,u)=>{const p=L(c.left),z=L(c.right),P=new RegExp(`${p}([\\s\\S]+?)${z}`,"g");d=d.replace(P,(I,se)=>(f.push(I),`%%%LATEX_BLOCK_${f.length-1}%%%`))}),d=M.parse(d),d=d.replace(/%%%LATEX_BLOCK_(\d+)%%%/g,(c,u)=>f[parseInt(u,10)])}return b&&(d=D(d,b)),l&&E&&(d=E(d,w)),d}async function R(n){if(s.length>0&&n&&s.some(f=>n.includes(f.left)&&n.includes(f.right))&&V(_,{delimiters:s,throwOnError:!1}),_){const d=_.querySelectorAll(".mermaid");if(d.length>0){await ae();const{default:f}=await q(()=>import("./mermaid.core-C4JyAOVD.js").then(c=>c.b4),__vite__mapDeps([0,1,2,3]),import.meta.url);f.initialize({startOnLoad:!1,theme:k==="dark"?"dark":"default",securityLevel:"antiscript"}),await f.run({nodes:Array.from(d).map(c=>c)})}}}re(async()=>{_&&document.body.contains(_)?await R(a):console.error("Element is not in the DOM")});function C(n){J[n?"unshift":"push"](()=>{_=n,t(2,_)})}return i.$$set=n=>{"chatbot"in n&&t(0,r=n.chatbot),"message"in n&&t(4,a=n.message),"sanitize_html"in n&&t(5,l=n.sanitize_html),"latex_delimiters"in n&&t(6,s=n.latex_delimiters),"render_markdown"in n&&t(1,o=n.render_markdown),"line_breaks"in n&&t(7,h=n.line_breaks),"header_links"in n&&t(8,g=n.header_links),"root"in n&&t(9,w=n.root),"allow_tags"in n&&t(10,b=n.allow_tags),"theme_mode"in n&&t(11,k=n.theme_mode)},i.$$.update=()=>{i.$$.dirty&16&&(a&&a.trim()?t(3,y=O(a)):t(3,y=""))},[r,o,_,y,a,l,s,h,g,w,b,k,C]}class ce extends W{constructor(e){super(),$(this,e,ie,ne,te,{chatbot:0,message:4,sanitize_html:5,latex_delimiters:6,render_markdown:1,line_breaks:7,header_links:8,root:9,allow_tags:10,theme_mode:11})}get chatbot(){return this.$$.ctx[0]}set chatbot(e){this.$$set({chatbot:e}),m()}get message(){return this.$$.ctx[4]}set message(e){this.$$set({message:e}),m()}get sanitize_html(){return this.$$.ctx[5]}set sanitize_html(e){this.$$set({sanitize_html:e}),m()}get latex_delimiters(){return this.$$.ctx[6]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),m()}get render_markdown(){return this.$$.ctx[1]}set render_markdown(e){this.$$set({render_markdown:e}),m()}get line_breaks(){return this.$$.ctx[7]}set line_breaks(e){this.$$set({line_breaks:e}),m()}get header_links(){return this.$$.ctx[8]}set header_links(e){this.$$set({header_links:e}),m()}get root(){return this.$$.ctx[9]}set root(e){this.$$set({root:e}),m()}get allow_tags(){return this.$$.ctx[10]}set allow_tags(e){this.$$set({allow_tags:e}),m()}get theme_mode(){return this.$$.ctx[11]}set theme_mode(e){this.$$set({theme_mode:e}),m()}}export{ce as M};
//# sourceMappingURL=MarkdownCode-CQ5NYqiB.js.map
