import{f as qe}from"./index-BAPxzJ9I.js";/* empty css                                             */const{SvelteComponent:Ue,append:Fe,attr:q,detach:He,init:Ie,insert:Te,noop:X,safe_not_equal:Me,svg_element:oe}=window.__gradio__svelte__internal;function Oe(t){let e,n;return{c(){e=oe("svg"),n=oe("path"),q(n,"fill","currentColor"),q(n,"d","M200 32h-36.26a47.92 47.92 0 0 0-71.48 0H56a16 16 0 0 0-16 16v168a16 16 0 0 0 16 16h144a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16m-72 0a32 32 0 0 1 32 32H96a32 32 0 0 1 32-32m72 184H56V48h26.75A47.9 47.9 0 0 0 80 64v8a8 8 0 0 0 8 8h80a8 8 0 0 0 8-8v-8a47.9 47.9 0 0 0-2.75-16H200Z"),q(e,"xmlns","http://www.w3.org/2000/svg"),q(e,"width","100%"),q(e,"height","100%"),q(e,"viewBox","0 0 256 256")},m(l,i){Te(l,e,i),Fe(e,n)},p:X,i:X,o:X,d(l){l&&He(e)}}}class kt extends Ue{constructor(e){super(),Ie(this,e,null,Oe,Me,{})}}const{SvelteComponent:je,append:Y,attr:y,detach:Ne,init:Be,insert:Ve,noop:x,safe_not_equal:Je,svg_element:I}=window.__gradio__svelte__internal;function Re(t){let e,n,l,i;return{c(){e=I("svg"),n=I("path"),l=I("polyline"),i=I("line"),y(n,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),y(l,"points","17 8 12 3 7 8"),y(i,"x1","12"),y(i,"y1","3"),y(i,"x2","12"),y(i,"y2","15"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","90%"),y(e,"height","90%"),y(e,"viewBox","0 0 24 24"),y(e,"fill","none"),y(e,"stroke","currentColor"),y(e,"stroke-width","2"),y(e,"stroke-linecap","round"),y(e,"stroke-linejoin","round"),y(e,"class","feather feather-upload")},m(o,d){Ve(o,e,d),Y(e,n),Y(e,l),Y(e,i)},p:x,i:x,o:x,d(o){o&&Ne(e)}}}let Et=class extends je{constructor(e){super(),Be(this,e,null,Re,Je,{})}};const{SvelteComponent:Ze,append:k,attr:C,detach:he,element:P,flush:T,init:Ge,insert:ge,noop:ue,safe_not_equal:Ke,set_data:M,set_style:$,space:ee,text:U,toggle_class:fe}=window.__gradio__svelte__internal,{onMount:Qe,createEventDispatcher:Xe,onDestroy:Ye}=window.__gradio__svelte__internal;function de(t){let e,n,l,i,o=H(t[2])+"",d,_,s,f,a=t[2].orig_name+"",u;return{c(){e=P("div"),n=P("span"),l=P("div"),i=P("progress"),d=U(o),s=ee(),f=P("span"),u=U(a),$(i,"visibility","hidden"),$(i,"height","0"),$(i,"width","0"),i.value=_=H(t[2]),C(i,"max","100"),C(i,"class","svelte-1vsfomn"),C(l,"class","progress-bar svelte-1vsfomn"),C(f,"class","file-name svelte-1vsfomn"),C(e,"class","file svelte-1vsfomn")},m(c,m){ge(c,e,m),k(e,n),k(n,l),k(l,i),k(i,d),k(e,s),k(e,f),k(f,u)},p(c,m){m&4&&o!==(o=H(c[2])+"")&&M(d,o),m&4&&_!==(_=H(c[2]))&&(i.value=_),m&4&&a!==(a=c[2].orig_name+"")&&M(u,a)},d(c){c&&he(e)}}}function xe(t){let e,n,l,i=t[0].length+"",o,d,_=t[0].length>1?"files":"file",s,f,a,u=t[2]&&de(t);return{c(){e=P("div"),n=P("span"),l=U("Uploading "),o=U(i),d=ee(),s=U(_),f=U("..."),a=ee(),u&&u.c(),C(n,"class","uploading svelte-1vsfomn"),C(e,"class","wrap svelte-1vsfomn"),fe(e,"progress",t[1])},m(c,m){ge(c,e,m),k(e,n),k(n,l),k(n,o),k(n,d),k(n,s),k(n,f),k(e,a),u&&u.m(e,null)},p(c,[m]){m&1&&i!==(i=c[0].length+"")&&M(o,i),m&1&&_!==(_=c[0].length>1?"files":"file")&&M(s,_),c[2]?u?u.p(c,m):(u=de(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null),m&2&&fe(e,"progress",c[1])},i:ue,o:ue,d(c){c&&he(e),u&&u.d()}}}function H(t){return t.progress*100/(t.size||0)||0}function $e(t){let e=0;return t.forEach(n=>{e+=H(n)}),document.documentElement.style.setProperty("--upload-progress-width",(e/t.length).toFixed(2)+"%"),e/t.length}function et(t,e,n){let{upload_id:l}=e,{root:i}=e,{files:o}=e,{stream_handler:d}=e,_,s=!1,f,a,u=o.map(b=>({...b,progress:0}));const c=Xe();function m(b,L){n(0,u=u.map(z=>(z.orig_name===b&&(z.progress+=L),z)))}return Qe(async()=>{if(_=await d(new URL(`${i}/gradio_api/upload_progress?upload_id=${l}`)),_==null)throw new Error("Event source is not defined");_.onmessage=async function(b){const L=JSON.parse(b.data);s||n(1,s=!0),L.msg==="done"?(_?.close(),c("done")):(n(7,f=L),m(L.orig_name,L.chunk_size))}}),Ye(()=>{(_!=null||_!=null)&&_.close()}),t.$$set=b=>{"upload_id"in b&&n(3,l=b.upload_id),"root"in b&&n(4,i=b.root),"files"in b&&n(5,o=b.files),"stream_handler"in b&&n(6,d=b.stream_handler)},t.$$.update=()=>{t.$$.dirty&1&&$e(u),t.$$.dirty&129&&n(2,a=f||u[0])},[u,s,a,l,i,o,d,f]}class tt extends Ze{constructor(e){super(),Ge(this,e,et,xe,Ke,{upload_id:3,root:4,files:5,stream_handler:6})}get upload_id(){return this.$$.ctx[3]}set upload_id(e){this.$$set({upload_id:e}),T()}get root(){return this.$$.ctx[4]}set root(e){this.$$set({root:e}),T()}get files(){return this.$$.ctx[5]}set files(e){this.$$set({files:e}),T()}get stream_handler(){return this.$$.ctx[6]}set stream_handler(e){this.$$set({stream_handler:e}),T()}}function nt(){let t,e;return{drag(n,l={}){e=l;function i(){t=document.createElement("input"),t.type="file",t.style.display="none",t.setAttribute("aria-label","File upload"),t.setAttribute("data-testid","file-upload");const u=Array.isArray(e.accepted_types)?e.accepted_types.join(","):e.accepted_types||void 0;u&&(t.accept=u),t.multiple=e.mode==="multiple"||!1,e.mode==="directory"&&(t.webkitdirectory=!0,t.setAttribute("directory",""),t.setAttribute("mozdirectory","")),n.appendChild(t)}i();function o(u){u.preventDefault(),u.stopPropagation()}function d(u){u.preventDefault(),u.stopPropagation(),e.on_drag_change?.(!0)}function _(u){u.preventDefault(),u.stopPropagation(),e.on_drag_change?.(!1)}function s(u){if(u.preventDefault(),u.stopPropagation(),e.on_drag_change?.(!1),!u.dataTransfer?.files)return;const c=Array.from(u.dataTransfer.files);c.length>0&&e.on_files?.(c)}function f(){e.disable_click||(t.value="",t.click())}function a(){if(t.files){const u=Array.from(t.files);u.length>0&&e.on_files?.(u)}}return n.addEventListener("drag",o),n.addEventListener("dragstart",o),n.addEventListener("dragend",o),n.addEventListener("dragover",o),n.addEventListener("dragenter",d),n.addEventListener("dragleave",_),n.addEventListener("drop",s),n.addEventListener("click",f),t.addEventListener("change",a),{update(u){e=u,t.remove(),i(),t.addEventListener("change",a)},destroy(){n.removeEventListener("drag",o),n.removeEventListener("dragstart",o),n.removeEventListener("dragend",o),n.removeEventListener("dragover",o),n.removeEventListener("dragenter",d),n.removeEventListener("dragleave",_),n.removeEventListener("drop",s),n.removeEventListener("click",f),t.removeEventListener("change",a),t.remove()}}},open_file_upload(){t&&(t.value="",t.click())}}}const{SvelteComponent:it,action_destroyer:lt,attr:E,check_outros:me,create_component:rt,create_slot:pe,destroy_component:st,detach:j,element:be,empty:ve,flush:p,get_all_dirty_from_scope:we,get_slot_changes:ye,group_outros:ke,init:at,insert:N,is_function:ot,listen:ut,mount_component:ft,safe_not_equal:dt,set_style:O,toggle_class:h,transition_in:A,transition_out:W,update_slot_base:Ee}=window.__gradio__svelte__internal,{createEventDispatcher:_t,tick:ct,getContext:At}=window.__gradio__svelte__internal;function ht(t){let e,n,l,i,o,d,_;const s=t[29].default,f=pe(s,t,t[28],null);return{c(){e=be("button"),f&&f.c(),E(e,"tabindex",n=t[9]?-1:0),E(e,"aria-label",l=t[14]||"Click to upload or drop files"),E(e,"aria-dropeffect","copy"),E(e,"class","svelte-edrmkl"),h(e,"hidden",t[9]),h(e,"center",t[4]),h(e,"boundedheight",t[3]),h(e,"flex",t[5]),h(e,"disable_click",t[7]),h(e,"icon-mode",t[12]),O(e,"height",t[12]?"":t[13]?typeof t[13]=="number"?t[13]+"px":t[13]:"100%")},m(a,u){N(a,e,u),f&&f.m(e,null),o=!0,d||(_=lt(i=t[19].call(null,e,{on_drag_change:ce,on_files:t[30],accepted_types:t[18],mode:t[6],disable_click:t[7]})),d=!0)},p(a,u){f&&f.p&&(!o||u[0]&268435456)&&Ee(f,s,a,a[28],o?ye(s,a[28],u,null):we(a[28]),null),(!o||u[0]&512&&n!==(n=a[9]?-1:0))&&E(e,"tabindex",n),(!o||u[0]&16384&&l!==(l=a[14]||"Click to upload or drop files"))&&E(e,"aria-label",l),i&&ot(i.update)&&u[0]&262336&&i.update.call(null,{on_drag_change:ce,on_files:a[30],accepted_types:a[18],mode:a[6],disable_click:a[7]}),(!o||u[0]&512)&&h(e,"hidden",a[9]),(!o||u[0]&16)&&h(e,"center",a[4]),(!o||u[0]&8)&&h(e,"boundedheight",a[3]),(!o||u[0]&32)&&h(e,"flex",a[5]),(!o||u[0]&128)&&h(e,"disable_click",a[7]),(!o||u[0]&4096)&&h(e,"icon-mode",a[12]),u[0]&12288&&O(e,"height",a[12]?"":a[13]?typeof a[13]=="number"?a[13]+"px":a[13]:"100%")},i(a){o||(A(f,a),o=!0)},o(a){W(f,a),o=!1},d(a){a&&j(e),f&&f.d(a),d=!1,_()}}}function gt(t){let e,n,l=!t[9]&&_e(t);return{c(){l&&l.c(),e=ve()},m(i,o){l&&l.m(i,o),N(i,e,o),n=!0},p(i,o){i[9]?l&&(ke(),W(l,1,1,()=>{l=null}),me()):l?(l.p(i,o),o[0]&512&&A(l,1)):(l=_e(i),l.c(),A(l,1),l.m(e.parentNode,e))},i(i){n||(A(l),n=!0)},o(i){W(l),n=!1},d(i){i&&j(e),l&&l.d(i)}}}function mt(t){let e,n,l,i,o,d;const _=t[29].default,s=pe(_,t,t[28],null);return{c(){e=be("button"),s&&s.c(),E(e,"tabindex",n=t[9]?-1:0),E(e,"aria-label",l=t[14]||"Paste from clipboard"),E(e,"class","svelte-edrmkl"),h(e,"hidden",t[9]),h(e,"center",t[4]),h(e,"boundedheight",t[3]),h(e,"flex",t[5]),h(e,"icon-mode",t[12]),O(e,"height",t[12]?"":t[13]?typeof t[13]=="number"?t[13]+"px":t[13]:"100%")},m(f,a){N(f,e,a),s&&s.m(e,null),i=!0,o||(d=ut(e,"click",t[15]),o=!0)},p(f,a){s&&s.p&&(!i||a[0]&268435456)&&Ee(s,_,f,f[28],i?ye(_,f[28],a,null):we(f[28]),null),(!i||a[0]&512&&n!==(n=f[9]?-1:0))&&E(e,"tabindex",n),(!i||a[0]&16384&&l!==(l=f[14]||"Paste from clipboard"))&&E(e,"aria-label",l),(!i||a[0]&512)&&h(e,"hidden",f[9]),(!i||a[0]&16)&&h(e,"center",f[4]),(!i||a[0]&8)&&h(e,"boundedheight",f[3]),(!i||a[0]&32)&&h(e,"flex",f[5]),(!i||a[0]&4096)&&h(e,"icon-mode",f[12]),a[0]&12288&&O(e,"height",f[12]?"":f[13]?typeof f[13]=="number"?f[13]+"px":f[13]:"100%")},i(f){i||(A(s,f),i=!0)},o(f){W(s,f),i=!1},d(f){f&&j(e),s&&s.d(f),o=!1,d()}}}function _e(t){let e,n;return e=new tt({props:{root:t[8],upload_id:t[16],files:t[17],stream_handler:t[11]}}),{c(){rt(e.$$.fragment)},m(l,i){ft(e,l,i),n=!0},p(l,i){const o={};i[0]&256&&(o.root=l[8]),i[0]&65536&&(o.upload_id=l[16]),i[0]&131072&&(o.files=l[17]),i[0]&2048&&(o.stream_handler=l[11]),e.$set(o)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){W(e.$$.fragment,l),n=!1},d(l){st(e,l)}}}function pt(t){let e,n,l,i;const o=[mt,gt,ht],d=[];function _(s,f){return s[0]==="clipboard"?0:s[2]&&s[10]?1:2}return e=_(t),n=d[e]=o[e](t),{c(){n.c(),l=ve()},m(s,f){d[e].m(s,f),N(s,l,f),i=!0},p(s,f){let a=e;e=_(s),e===a?d[e].p(s,f):(ke(),W(d[a],1,1,()=>{d[a]=null}),me(),n=d[e],n?n.p(s,f):(n=d[e]=o[e](s),n.c()),A(n,1),n.m(l.parentNode,l))},i(s){i||(A(n),i=!0)},o(s){W(n),i=!1},d(s){s&&j(l),d[e].d(s)}}}function bt(t,e,n){if(!t||t==="*"||t==="file/*"||Array.isArray(t)&&t.some(i=>i==="*"||i==="file/*"))return!0;let l;if(typeof t=="string")l=t.split(",").map(i=>i.trim());else if(Array.isArray(t))l=t;else return!1;return l.includes(e)||l.some(i=>{const[o]=i.split("/").map(d=>d.trim());return i.endsWith("/*")&&n.startsWith(o+"/")})}const ce=t=>t=t;function vt(t,e,n){let l,{$$slots:i={},$$scope:o}=e;const{drag:d,open_file_upload:_}=nt();let{filetype:s=null}=e,{dragging:f=!1}=e,{boundedheight:a=!0}=e,{center:u=!0}=e,{flex:c=!0}=e,{file_count:m="single"}=e,{disable_click:b=!1}=e,{root:L}=e,{hidden:z=!1}=e,{format:B="file"}=e,{uploading:F=!1}=e,{show_progress:te=!0}=e,{max_file_size:V=null}=e,{upload:J}=e,{stream_handler:ne}=e,{icon_upload:ie=!1}=e,{height:le=void 0}=e,{aria_label:re=void 0}=e;function Le(){_()}let R,Z,S,se=null;const Ae=()=>{if(typeof navigator<"u"){const r=navigator.userAgent.toLowerCase();return r.indexOf("iphone")>-1||r.indexOf("ipad")>-1}return!1},D=_t(),Ce=["image","video","audio","text","file"],G=r=>l&&r.startsWith(".")?(se=!0,r):l&&r.includes("file/*")?"*":r.startsWith(".")||r.endsWith("/*")?r:Ce.includes(r)?r+"/*":"."+r;function Pe(){navigator.clipboard.read().then(async r=>{for(let g=0;g<r.length;g++){const v=r[g].types.find(w=>w.startsWith("image/"));if(v){r[g].getType(v).then(async w=>{const Q=new File([w],`clipboard.${v.replace("image/","")}`);await K([Q])});break}}})}function We(){_()}async function ze(r){await ct(),n(16,R=Math.random().toString(36).substring(2,15)),n(2,F=!0);try{const g=await J(r,L,R,V??1/0);return D("load",m==="single"?g?.[0]:g),n(2,F=!1),g||[]}catch(g){return D("error",g.message),n(2,F=!1),[]}}async function K(r){if(!r.length)return;let g=r.map(v=>new File([v],v instanceof File?v.name:"file",{type:v.type}));return l&&se&&(g=g.filter(v=>Se(v)?!0:(D("error",`Invalid file type: ${v.name}. Only ${s} allowed.`),!1)),g.length===0)?[]:(n(17,Z=await qe(g)),await ze(Z))}function Se(r){return s?(Array.isArray(s)?s:[s]).some(v=>{const w=G(v);if(w.startsWith("."))return r.name.toLowerCase().endsWith(w.toLowerCase());if(w==="*")return!0;if(w.endsWith("/*")){const[Q]=w.split("/");return r.type.startsWith(Q+"/")}return r.type===w}):!0}async function ae(r){const g=r.filter(v=>{const w="."+v.name.split(".").pop();return w&&bt(S,w,v.type)||(w&&Array.isArray(s)?s.includes(w):w===s)?!0:(D("error",`Invalid file type only ${s} allowed.`),!1)});if(B!="blob")await K(g);else{if(m==="single"){D("load",g[0]);return}D("load",g)}}const De=r=>ae(r);return t.$$set=r=>{"filetype"in r&&n(0,s=r.filetype),"dragging"in r&&n(1,f=r.dragging),"boundedheight"in r&&n(3,a=r.boundedheight),"center"in r&&n(4,u=r.center),"flex"in r&&n(5,c=r.flex),"file_count"in r&&n(6,m=r.file_count),"disable_click"in r&&n(7,b=r.disable_click),"root"in r&&n(8,L=r.root),"hidden"in r&&n(9,z=r.hidden),"format"in r&&n(21,B=r.format),"uploading"in r&&n(2,F=r.uploading),"show_progress"in r&&n(10,te=r.show_progress),"max_file_size"in r&&n(22,V=r.max_file_size),"upload"in r&&n(23,J=r.upload),"stream_handler"in r&&n(11,ne=r.stream_handler),"icon_upload"in r&&n(12,ie=r.icon_upload),"height"in r&&n(13,le=r.height),"aria_label"in r&&n(14,re=r.aria_label),"$$scope"in r&&n(28,o=r.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&134217729&&(s==null?n(18,S=null):typeof s=="string"?n(18,S=G(s)):l&&s.includes("file/*")?n(18,S="*"):(n(0,s=s.map(G)),n(18,S=s.join(", "))))},n(27,l=Ae()),[s,f,F,a,u,c,m,b,L,z,te,ne,ie,le,re,Pe,R,Z,S,d,ae,B,V,J,Le,We,K,l,o,i,De]}class Ct extends it{constructor(e){super(),at(this,e,vt,pt,dt,{filetype:0,dragging:1,boundedheight:3,center:4,flex:5,file_count:6,disable_click:7,root:8,hidden:9,format:21,uploading:2,show_progress:10,max_file_size:22,upload:23,stream_handler:11,icon_upload:12,height:13,aria_label:14,open_upload:24,paste_clipboard:15,open_file_upload:25,load_files:26},null,[-1,-1])}get filetype(){return this.$$.ctx[0]}set filetype(e){this.$$set({filetype:e}),p()}get dragging(){return this.$$.ctx[1]}set dragging(e){this.$$set({dragging:e}),p()}get boundedheight(){return this.$$.ctx[3]}set boundedheight(e){this.$$set({boundedheight:e}),p()}get center(){return this.$$.ctx[4]}set center(e){this.$$set({center:e}),p()}get flex(){return this.$$.ctx[5]}set flex(e){this.$$set({flex:e}),p()}get file_count(){return this.$$.ctx[6]}set file_count(e){this.$$set({file_count:e}),p()}get disable_click(){return this.$$.ctx[7]}set disable_click(e){this.$$set({disable_click:e}),p()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),p()}get hidden(){return this.$$.ctx[9]}set hidden(e){this.$$set({hidden:e}),p()}get format(){return this.$$.ctx[21]}set format(e){this.$$set({format:e}),p()}get uploading(){return this.$$.ctx[2]}set uploading(e){this.$$set({uploading:e}),p()}get show_progress(){return this.$$.ctx[10]}set show_progress(e){this.$$set({show_progress:e}),p()}get max_file_size(){return this.$$.ctx[22]}set max_file_size(e){this.$$set({max_file_size:e}),p()}get upload(){return this.$$.ctx[23]}set upload(e){this.$$set({upload:e}),p()}get stream_handler(){return this.$$.ctx[11]}set stream_handler(e){this.$$set({stream_handler:e}),p()}get icon_upload(){return this.$$.ctx[12]}set icon_upload(e){this.$$set({icon_upload:e}),p()}get height(){return this.$$.ctx[13]}set height(e){this.$$set({height:e}),p()}get aria_label(){return this.$$.ctx[14]}set aria_label(e){this.$$set({aria_label:e}),p()}get open_upload(){return this.$$.ctx[24]}get paste_clipboard(){return this.$$.ctx[15]}get open_file_upload(){return this.$$.ctx[25]}get load_files(){return this.$$.ctx[26]}}export{kt as I,Et as U,Ct as a,nt as c};
//# sourceMappingURL=Upload-CeuP3WiG.js.map
